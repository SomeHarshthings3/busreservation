let vip_price=1500,economy_price=3e3,firstSeatLabel=1;var details=[],$cart=$("#selected-seats"),$counter=$("#counter"),$total=$("#total"),sc=$("#seat-map").seatCharts({map:["ee____","ee_eee","ee_eee","___eee","ee_eee","ee_eee","ee_eee","ee_eee","ee_eee","ee_eee","eeeeee"],seats:{e:{price:economy_price,classes:"economy-class",category:"Economy Class"}},naming:{top:!1,getLabel:function(e,t,a){return firstSeatLabel++}},click:function(){if("available"==this.status())return $(event.target).toggleClass("animated rubberBand"),$('<li class="p-b-4">'+this.data().category+" Seat # "+this.settings.label+": <b>Ksh "+this.data().price+'</b> <a href="javascript:void(0);" class="cancel-cart-item btn btn-danger btn-sm"><i class="fa fa-trash"></i> cancel</a></li>').attr("id","cart-item-"+this.settings.id).data("seatId",this.settings.id).appendTo($cart),$counter.text(sc.find("selected").length+1),$total.text(recalculateTotal(sc)+this.data().price),details.push({seatNo:this.settings.label,price:this.data().price}),"selected";if("selected"==this.status()){$(event.target).toggleClass("animated rubberBand"),$counter.text(sc.find("selected").length-1),$total.text(recalculateTotal(sc)-this.data().price),$("#cart-item-"+this.settings.id).remove(),no=this.settings.label;var e=details.filter(function(e){return e.seatNo!=no});return details=e,"available"}return"unavailable"==this.status()?"unavailable":this.style()}});let recalculateTotal=e=>{var t=0;return e.find("selected").each(function(){t+=this.data().price}),t};$("#selected-seats").on("click",".cancel-cart-item",function(){$("#"+sc.get($(this).parents("li:first").data("seatId")).settings.id).toggleClass("animated rubberBand"),sc.get($(this).parents("li:first").data("seatId")).click()});let booked_seats=function(e){$.ajax({method:"GET",url:"https://examinationcomplaint.theschemaqhigh.co.ke/HCI/api/book/?bus_id="+$.trim(e)+"&booked_seats",success:function(e){sc.find("unavailable").status("available"),e.forEach(e=>sc.get([sc.seatIds[e-1]]).status("unavailable"))},error:function(e){console.log(e)}})};